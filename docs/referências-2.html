<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Referências | Introdução à Linguagem R: seus fundamentos e sua prática</title>

    <meta name="author" content="Pedro Faria" />
  
   <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
   <meta name="generator" content="placeholder" />
  <meta property="og:title" content="Referências | Introdução à Linguagem R: seus fundamentos e sua prática" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="bem-vindo.html" />
  <meta property="og:image" content="bem-vindo.html/capa.png" />
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Referências | Introdução à Linguagem R: seus fundamentos e sua prática" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="twitter:image" content="bem-vindo.html/capa.png" />
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/header-attrs-2.11/header-attrs.js"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.3.1/transition.js"></script>
    <script src="libs/bs3compat-0.3.1/tabs.js"></script>
    <script src="libs/bs3compat-0.3.1/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>

  <!-- CSS -->
  
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Introdução à Linguagem R: seus fundamentos e sua prática</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<div id="referências-2" class="section level1 unnumbered">
<h1>Referências</h1>
<div id="capítulo-4---transformando-dados-com-dplyr" class="section level2 unlisted unnumbered">
<h2>Capítulo 4 - Transformando dados com <code>dplyr</code></h2>
<center>
<em>Exercício 1</em>
</center>
<p><strong>4.1.A)</strong> Em resumo, os comandos abaixo calculam o número de linhas que descrevem um personagem masculino que possui olhos vermelhos. Primeiro, <code>count()</code> calcula o número de linhas por sexo e por cada coloração do olho. Em seguida, a função <code>filter()</code> seleciona apenas as linhas que dizem respeito a personagens masculinos e que possuem olhos vermelhos.</p>
<div class="sourceCode" id="cb2070"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2070-1"><a href="referências-2.html#cb2070-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span> </span>
<span id="cb2070-2"><a href="referências-2.html#cb2070-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(sex, eye_color) <span class="sc">%&gt;%</span> </span>
<span id="cb2070-3"><a href="referências-2.html#cb2070-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">&quot;male&quot;</span>, eye_color <span class="sc">==</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 3
##   sex   eye_color     n
##   &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;
## 1 male  red           2</code></pre>
<p><strong>4.1.B)</strong> Em resumo, os comandos abaixo calculam o peso médio de cada sexo descrito na tabela <code>starwars</code>. Primeiro, a função <code>select()</code> vai selecionar todas as colunas da tabela <code>starwars</code>, <strong>exceto as colunas contidas no vetor <code>vec</code></strong>. Segundo, <code>group_by()</code> vai agrupar a base de acordo com os valores dispostos na coluna <code>sex</code>. Terceiro, <code>summarise()</code> vai tratar de calcular o peso médio dentro de cada grupo da coluna <code>sex</code>. Em outras palavras, <code>summarise()</code> vai separar as linhas da tabela de acordo com os grupos da coluna <code>sex</code> e, em seguida, vai aplicar a função <code>mean()</code> sobre a coluna <code>mass</code> de cada um desses grupos.</p>
<div class="sourceCode" id="cb2072"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2072-1"><a href="referências-2.html#cb2072-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;species&quot;</span>, <span class="st">&quot;homeworld&quot;</span>, <span class="st">&quot;films&quot;</span>, <span class="st">&quot;vehicles&quot;</span>, <span class="st">&quot;starships&quot;</span>)</span>
<span id="cb2072-2"><a href="referências-2.html#cb2072-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2072-3"><a href="referências-2.html#cb2072-3" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span> </span>
<span id="cb2072-4"><a href="referências-2.html#cb2072-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">all_of</span>(vec)) <span class="sc">%&gt;%</span> </span>
<span id="cb2072-5"><a href="referências-2.html#cb2072-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb2072-6"><a href="referências-2.html#cb2072-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">peso_medio =</span> <span class="fu">mean</span>(mass, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   sex            peso_medio
##   &lt;chr&gt;               &lt;dbl&gt;
## 1 female               54.7
## 2 hermaphroditic     1358  
## 3 male                 81.0
## 4 none                 69.8
## 5 &lt;NA&gt;                 48</code></pre>
<p><strong>4.1.C)</strong> O código abaixo aplica os seguintes passos sobre a tabela <code>mpg</code>: primeiro, <code>mutate()</code> adiciona uma coluna chamada <code>pais_origem</code>, onde cada modelo de carro descrito na tabela é categorizado de acoro com o país de origem do fabricante deste modelo; em seguida, <code>count()</code> contabiliza a quantidade de modelos que pertencem a cada país; por último, um novo <code>mutate()</code> é aplicado com o objetivo de calcular a proporção de cada país em relação ao total de modelos descritos na tabela.</p>
<div class="sourceCode" id="cb2074"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2074-1"><a href="referências-2.html#cb2074-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb2074-2"><a href="referências-2.html#cb2074-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2074-3"><a href="referências-2.html#cb2074-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">pais_origem =</span> <span class="fu">case_when</span>(</span>
<span id="cb2074-4"><a href="referências-2.html#cb2074-4" aria-hidden="true" tabindex="-1"></a>      manufacturer <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;audi&quot;</span>, <span class="st">&quot;volkswagen&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Alemanha&quot;</span>,</span>
<span id="cb2074-5"><a href="referências-2.html#cb2074-5" aria-hidden="true" tabindex="-1"></a>      manufacturer <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;nissan&quot;</span>, <span class="st">&quot;honda&quot;</span>,</span>
<span id="cb2074-6"><a href="referências-2.html#cb2074-6" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&quot;subaru&quot;</span>, <span class="st">&quot;toyota&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Japão&quot;</span>,</span>
<span id="cb2074-7"><a href="referências-2.html#cb2074-7" aria-hidden="true" tabindex="-1"></a>      manufacturer <span class="sc">==</span> <span class="st">&quot;hyundai&quot;</span> <span class="sc">~</span> <span class="st">&quot;Coréia do Sul&quot;</span>,</span>
<span id="cb2074-8"><a href="referências-2.html#cb2074-8" aria-hidden="true" tabindex="-1"></a>      manufacturer <span class="sc">==</span> <span class="st">&quot;land rover&quot;</span> <span class="sc">~</span> <span class="st">&quot;Inglaterra&quot;</span>,</span>
<span id="cb2074-9"><a href="referências-2.html#cb2074-9" aria-hidden="true" tabindex="-1"></a>      manufacturer <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;dodge&quot;</span>, <span class="st">&quot;jeep&quot;</span>, </span>
<span id="cb2074-10"><a href="referências-2.html#cb2074-10" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&quot;chevrolet&quot;</span>, <span class="st">&quot;ford&quot;</span>,</span>
<span id="cb2074-11"><a href="referências-2.html#cb2074-11" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&quot;lincoln&quot;</span>, <span class="st">&quot;pontiac&quot;</span>,</span>
<span id="cb2074-12"><a href="referências-2.html#cb2074-12" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&quot;mercury&quot;</span>) <span class="sc">~</span> <span class="st">&quot;EUA&quot;</span></span>
<span id="cb2074-13"><a href="referências-2.html#cb2074-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2074-14"><a href="referências-2.html#cb2074-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb2074-15"><a href="referências-2.html#cb2074-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(pais_origem) <span class="sc">%&gt;%</span> </span>
<span id="cb2074-16"><a href="referências-2.html#cb2074-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2074-17"><a href="referências-2.html#cb2074-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">prop =</span> ( n <span class="sc">*</span> <span class="dv">100</span> ) <span class="sc">/</span> <span class="fu">sum</span>(n)</span>
<span id="cb2074-18"><a href="referências-2.html#cb2074-18" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 5 x 3
##   pais_origem       n  prop
##   &lt;chr&gt;         &lt;int&gt; &lt;dbl&gt;
## 1 Alemanha         45 19.2 
## 2 Coréia do Sul    14  5.98
## 3 EUA             101 43.2 
## 4 Inglaterra        4  1.71
## 5 Japão            70 29.9</code></pre>
<center>
<em>Exercício 2</em>
</center>
<p><strong>4.2.A)</strong> Primeiro, identifique as principais colunas que são de seu interesse para responder a pergunta estipulada na questão. Para responder a pergunta, precisamos medir em quanto os preços cobrados por cada universidade aumentou e, para isso, não precisaremos das colunas <code>net_cost</code>, <code>income_lvl</code> e <code>campus</code>. Por isso, podemos rapidamente eliminar essas colunas com um <code>select()</code>.</p>
<div class="sourceCode" id="cb2076"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2076-1"><a href="referências-2.html#cb2076-1" aria-hidden="true" tabindex="-1"></a>custos <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span></span>
<span id="cb2076-2"><a href="referências-2.html#cb2076-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>net_cost, <span class="sc">-</span>income_lvl, <span class="sc">-</span>campus)</span>
<span id="cb2076-3"><a href="referências-2.html#cb2076-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2076-4"><a href="referências-2.html#cb2076-4" aria-hidden="true" tabindex="-1"></a>custos</span></code></pre></div>
<pre><code>## # A tibble: 209,012 x 4
##    name                              state total_price  year
##    &lt;chr&gt;                             &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;
##  1 Piedmont International University NC          20174  2016
##  2 Piedmont International University NC          20174  2016
##  3 Piedmont International University NC          20174  2016
##  4 Piedmont International University NC          20174  2016
##  5 Piedmont International University NC          20514  2017
##  6 Piedmont International University NC          20514  2017
##  7 Piedmont International University NC          20514  2017
##  8 Piedmont International University NC          20514  2017
##  9 Piedmont International University NC          20514  2017
## 10 Piedmont International University NC          20829  2018
## # ... with 209,002 more rows</code></pre>
<p>Agora, temos um problema importante a ser analisado: é possível que haja observações repetidas? Ou, será que há várias linhas descrevendo uma mesma universidade em um mesmo ano? As primeiras linhas da tabela acima já nos mostram que sim, há repetição de observações ao longo da base. Para corrigir essa repetição podemos aplicar a função <code>distinct()</code> sobre a base.</p>
<div class="sourceCode" id="cb2078"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2078-1"><a href="referências-2.html#cb2078-1" aria-hidden="true" tabindex="-1"></a>custos <span class="ot">&lt;-</span> custos <span class="sc">%&gt;%</span> </span>
<span id="cb2078-2"><a href="referências-2.html#cb2078-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span>
<span id="cb2078-3"><a href="referências-2.html#cb2078-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2078-4"><a href="referências-2.html#cb2078-4" aria-hidden="true" tabindex="-1"></a>custos</span></code></pre></div>
<pre><code>## # A tibble: 40,991 x 4
##    name                              state total_price  year
##    &lt;chr&gt;                             &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;
##  1 Piedmont International University NC          20174  2016
##  2 Piedmont International University NC          20514  2017
##  3 Piedmont International University NC          20829  2018
##  4 Piedmont International University NC          23000  2016
##  5 Piedmont International University NC          26430  2017
##  6 Piedmont International University NC          26870  2018
##  7 Kaplan University-Milwaukee       WI          22413  2017
##  8 Kaplan University-Milwaukee       WI          22492  2018
##  9 Kaplan University-Indianapolis    IN          22413  2017
## 10 Kaplan University-Indianapolis    IN          22492  2018
## # ... with 40,981 more rows</code></pre>
<p>Lembre-se que, mesmo após aplicarmos <code>distinct()</code> sobre a base, pode haver dois <code>total_price</code>’s para uma mesma universidade em um mesmo ano. Ou seja, <code>distinct()</code> tratou de eliminar observações repetidas da tabela, isto é, observações que possuem exatamente os mesmos valores em todas as colunas. Sendo assim, podem existir na tabela, dois (ou mais) valores que se referem a uma mesma universidade e a um mesmo ano, mas que possuem valores diferentes na coluna <code>total_price</code>. O resultado dos comandos abaixo confirmam essa suspeita:</p>
<div class="sourceCode" id="cb2080"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2080-1"><a href="referências-2.html#cb2080-1" aria-hidden="true" tabindex="-1"></a>custos <span class="sc">%&gt;%</span> </span>
<span id="cb2080-2"><a href="referências-2.html#cb2080-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(name, year) <span class="sc">%&gt;%</span> </span>
<span id="cb2080-3"><a href="referências-2.html#cb2080-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(total_price) <span class="sc">%&gt;%</span> </span>
<span id="cb2080-4"><a href="referências-2.html#cb2080-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## # A tibble: 14 x 4
## # Groups:   name, year [14]
##    name                                  year total_price     n
##    &lt;chr&gt;                                &lt;dbl&gt;       &lt;dbl&gt; &lt;int&gt;
##  1 Academy of Interactive Entertainment  2015       30876     2
##  2 Bryan University                      2010       32572     2
##  3 Bryan University                      2011       40821     2
##  4 Bryan University                      2013       24449     2
##  5 Bryan University                      2014       25446     2
##  6 Bryan University                      2016       25595     2
##  7 Bryan University                      2017       25595     2
##  8 Stevens-Henager College               2011       28414     2
##  9 Stevens-Henager College               2012       29539     2
## 10 Stevens-Henager College               2014       32312     2
## 11 Stevens-Henager College               2015       32440     2
## 12 Stevens-Henager College               2016       33960     2
## 13 Stevens-Henager College               2017       33960     2
## 14 Stevens-Henager College               2018       33489     2</code></pre>
<p>São poucas as universidades que possuem mais de um preço para um mesmo ano. Contudo, precisamos que cada ano de cada universidade possua um único preço. Logo, temos que encontrar um método que combine esses dois valores em um só. Calcular a média desses dois valores é uma solução razoável. Repare abaixo, que aplicamos um <code>group_by()</code> sobre <code>custos</code>, antes do <code>summarise()</code>, pois desejamos aplicar a média sobre <code>total_price</code>, dentro de cada ano (<code>year</code>) de cada universidade (<code>name</code>):</p>
<div class="sourceCode" id="cb2082"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2082-1"><a href="referências-2.html#cb2082-1" aria-hidden="true" tabindex="-1"></a>custos <span class="ot">&lt;-</span> custos <span class="sc">%&gt;%</span> </span>
<span id="cb2082-2"><a href="referências-2.html#cb2082-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(name, year) <span class="sc">%&gt;%</span> </span>
<span id="cb2082-3"><a href="referências-2.html#cb2082-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_price =</span> <span class="fu">mean</span>(total_price))</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;name&#39;. You can override using the `.groups` argument.</code></pre>
<div class="sourceCode" id="cb2084"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2084-1"><a href="referências-2.html#cb2084-1" aria-hidden="true" tabindex="-1"></a>custos</span></code></pre></div>
<pre><code>## # A tibble: 30,066 x 3
## # Groups:   name [3,664]
##    name                          year mean_price
##    &lt;chr&gt;                        &lt;dbl&gt;      &lt;dbl&gt;
##  1 Aaniiih Nakoda College        2010      17030
##  2 Aaniiih Nakoda College        2011      17030
##  3 Aaniiih Nakoda College        2012      17030
##  4 Aaniiih Nakoda College        2013      17030
##  5 Aaniiih Nakoda College        2014      17030
##  6 Aaniiih Nakoda College        2015      17030
##  7 Aaniiih Nakoda College        2016      17030
##  8 Aaniiih Nakoda College        2017      17030
##  9 Aaniiih Nakoda College        2018      17030
## 10 Abilene Christian University  2011      38250
## # ... with 30,056 more rows</code></pre>
<p>Resolvido esse problema, podemos nos preocupar em calcular a variação anual do preço de cada universidade. As funções <code>lead()</code> e <code>lag()</code> são muito úteis para compararmos o valor de um determinado ano ao seu par do ano anterior. Porém, para que <code>lag()</code> capture corretamente o valor do ano anterior, é fundamental que esses anos estejam organizados dentro de cada universidade, em uma ordem crescente, ao longo de toda a base. Por esse motivo, um <code>arrange()</code> é aplicado sobre a base antes do <code>mutate()</code>.</p>
<div class="sourceCode" id="cb2086"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2086-1"><a href="referências-2.html#cb2086-1" aria-hidden="true" tabindex="-1"></a>custos <span class="ot">&lt;-</span> custos <span class="sc">%&gt;%</span> </span>
<span id="cb2086-2"><a href="referências-2.html#cb2086-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(name, year) <span class="sc">%&gt;%</span> </span>
<span id="cb2086-3"><a href="referências-2.html#cb2086-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2086-4"><a href="referências-2.html#cb2086-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">var_price =</span> mean_price <span class="sc">-</span> <span class="fu">lag</span>(mean_price)</span>
<span id="cb2086-5"><a href="referências-2.html#cb2086-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb2086-6"><a href="referências-2.html#cb2086-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb2086-7"><a href="referências-2.html#cb2086-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2086-8"><a href="referências-2.html#cb2086-8" aria-hidden="true" tabindex="-1"></a>custos</span></code></pre></div>
<pre><code>## # A tibble: 30,066 x 4
##    name                          year mean_price var_price
##    &lt;chr&gt;                        &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;
##  1 Aaniiih Nakoda College        2010      17030        NA
##  2 Aaniiih Nakoda College        2011      17030         0
##  3 Aaniiih Nakoda College        2012      17030         0
##  4 Aaniiih Nakoda College        2013      17030         0
##  5 Aaniiih Nakoda College        2014      17030         0
##  6 Aaniiih Nakoda College        2015      17030         0
##  7 Aaniiih Nakoda College        2016      17030         0
##  8 Aaniiih Nakoda College        2017      17030         0
##  9 Aaniiih Nakoda College        2018      17030         0
## 10 Abilene Christian University  2011      38250        NA
## # ... with 30,056 more rows</code></pre>
<p>Com esses valores em mãos, podemos enfim responder à pergunta da questão. Basta reordenarmos a base de acordo com as maiores variações de preço (<code>var_price</code>) com <code>arrange()</code> e, em seguida, extraírmos as 10 primeiras linhas com <code>head()</code>. Com isso, temos que o custo anual do Los Medanos College subiu 95.944 dólares em 2012 (comparado ao valor do ano anterior).</p>
<div class="sourceCode" id="cb2088"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2088-1"><a href="referências-2.html#cb2088-1" aria-hidden="true" tabindex="-1"></a>custos <span class="sc">%&gt;%</span> </span>
<span id="cb2088-2"><a href="referências-2.html#cb2088-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(var_price)) <span class="sc">%&gt;%</span> </span>
<span id="cb2088-3"><a href="referências-2.html#cb2088-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 4
##    name                                           year mean_price var_price
##    &lt;chr&gt;                                         &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;
##  1 Los Medanos College                            2012    114083     95944 
##  2 Webb Institute                                 2013     61820     43300 
##  3 Jewish Theological Seminary of America         2016     75590     34140 
##  4 Santa Barbara Business College-Ventura         2018     57535     31207 
##  5 Rosedale Technical College                     2011     52240     21883 
##  6 Michigan Career and Technical Institute        2011     28462.    19388.
##  7 Hawaii Medical College                         2013     35918     18951 
##  8 St Paul&#39;s School of Nursing-Queens             2016     56189     18065 
##  9 Phillips School of Nursing at Mount Sinai Be~  2017     62850     17920 
## 10 Trinity International University-Florida       2017     30468     17718</code></pre>
<p><strong>4.2.B)</strong> Ao filtrarmos especificamente as observações do Los Medanos College, podemos identificar que a variação de mais de 94 mil dólares ocorre entre os valores $18.139 e $114.083. Perceba que os demais preços referentes a essa universidade se encontram entre 18 e 21 mil dólares. Logo, tal variação de mais 94 mil parece muito distoante para o padrão da universidade.</p>
<div class="sourceCode" id="cb2090"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2090-1"><a href="referências-2.html#cb2090-1" aria-hidden="true" tabindex="-1"></a>los_medanos <span class="ot">&lt;-</span> custos <span class="sc">%&gt;%</span> </span>
<span id="cb2090-2"><a href="referências-2.html#cb2090-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">&quot;Los Medanos College&quot;</span>, <span class="sc">!</span><span class="fu">is.na</span>(var_price)) </span>
<span id="cb2090-3"><a href="referências-2.html#cb2090-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2090-4"><a href="referências-2.html#cb2090-4" aria-hidden="true" tabindex="-1"></a>los_medanos</span></code></pre></div>
<pre><code>## # A tibble: 8 x 4
##   name                 year mean_price var_price
##   &lt;chr&gt;               &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;
## 1 Los Medanos College  2011      18139       427
## 2 Los Medanos College  2012     114083     95944
## 3 Los Medanos College  2013      19006    -95077
## 4 Los Medanos College  2014      18686      -320
## 5 Los Medanos College  2015      19200       514
## 6 Los Medanos College  2016      19750       550
## 7 Los Medanos College  2017      20700       950
## 8 Los Medanos College  2018      21260       560</code></pre>
<p>Expondo essa variação de maneira visual, temos:</p>
<div class="sourceCode" id="cb2092"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2092-1"><a href="referências-2.html#cb2092-1" aria-hidden="true" tabindex="-1"></a>nudge <span class="ot">&lt;-</span> <span class="fu">if_else</span>(los_medanos<span class="sc">$</span>var_price <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="dv">7000</span>, <span class="sc">-</span><span class="dv">7000</span>)</span>
<span id="cb2092-2"><a href="referências-2.html#cb2092-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2092-3"><a href="referências-2.html#cb2092-3" aria-hidden="true" tabindex="-1"></a>los_medanos <span class="sc">%&gt;%</span> </span>
<span id="cb2092-4"><a href="referências-2.html#cb2092-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb2092-5"><a href="referências-2.html#cb2092-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> var_price)</span>
<span id="cb2092-6"><a href="referências-2.html#cb2092-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb2092-7"><a href="referências-2.html#cb2092-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(</span>
<span id="cb2092-8"><a href="referências-2.html#cb2092-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">&quot;#0f5099&quot;</span></span>
<span id="cb2092-9"><a href="referências-2.html#cb2092-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb2092-10"><a href="referências-2.html#cb2092-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb2092-11"><a href="referências-2.html#cb2092-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(var_price, <span class="dv">0</span>)),</span>
<span id="cb2092-12"><a href="referências-2.html#cb2092-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_y =</span> nudge</span>
<span id="cb2092-13"><a href="referências-2.html#cb2092-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb2092-14"><a href="referências-2.html#cb2092-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb2092-15"><a href="referências-2.html#cb2092-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="cf">function</span>(x){</span>
<span id="cb2092-16"><a href="referências-2.html#cb2092-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">format</span>(x, <span class="at">digits =</span> <span class="dv">0</span>, <span class="at">big.mark =</span> <span class="st">&quot;.&quot;</span>)</span>
<span id="cb2092-17"><a href="referências-2.html#cb2092-17" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2092-18"><a href="referências-2.html#cb2092-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb2092-19"><a href="referências-2.html#cb2092-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb2092-20"><a href="referências-2.html#cb2092-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Ano&quot;</span>,</span>
<span id="cb2092-21"><a href="referências-2.html#cb2092-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Variação de preço&quot;</span></span>
<span id="cb2092-22"><a href="referências-2.html#cb2092-22" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p>Como definimos no enunciado, não temos uma resposta certa ou errada para a questão. O objetivo era apenas que você encontrasse esses dados e questionasse a sua validade. Qual o motivo para uma variação dessa magnitude é a principal questão aqui, e ela levanta altas suspeitas de que esse dado está incorreto, ou que foi alterado de alguma maneira durante o seu processo de coleta. Não sabemos exatamente o que ocorreu com esse dado, mas muito provavelmente há algo de errado com ele.</p>
<center>
<em>Exercício 3</em>
</center>
<p><strong>4.3.A)</strong> Primeiro, como vamos utilizar apenas da coluna 1 até a coluna 11, podemos selecionar essas colunas da tabela com um <code>select()</code>:</p>
<div class="sourceCode" id="cb2093"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2093-1"><a href="referências-2.html#cb2093-1" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> starwars <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">11</span>)</span></code></pre></div>
<p>Em seguida, temos que descobrir o número de valores únicos presentes em cada coluna do tipo <code>character</code> de <code>dados</code>. Essas colunas são: <code>name</code>, <code>hair_color</code>, <code>skin_color</code>, <code>eye_color</code>, <code>sex</code>, <code>gender</code>, <code>homeworld</code> e <code>species</code>. Para esse cálculo, poderíamos aplicar as funções <code>length()</code> e <code>unique()</code> separadamente em cada uma dessas colunas, como mostrado abaixo:</p>
<div class="sourceCode" id="cb2094"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2094-1"><a href="referências-2.html#cb2094-1" aria-hidden="true" tabindex="-1"></a>name_n <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(dados<span class="sc">$</span>name))</span>
<span id="cb2094-2"><a href="referências-2.html#cb2094-2" aria-hidden="true" tabindex="-1"></a>hair_color_n <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(dados<span class="sc">$</span>hair_color))</span>
<span id="cb2094-3"><a href="referências-2.html#cb2094-3" aria-hidden="true" tabindex="-1"></a>skin_color_n <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(dados<span class="sc">$</span>skin_color))</span>
<span id="cb2094-4"><a href="referências-2.html#cb2094-4" aria-hidden="true" tabindex="-1"></a>    .</span>
<span id="cb2094-5"><a href="referências-2.html#cb2094-5" aria-hidden="true" tabindex="-1"></a>    .</span>
<span id="cb2094-6"><a href="referências-2.html#cb2094-6" aria-hidden="true" tabindex="-1"></a>    .</span>
<span id="cb2094-7"><a href="referências-2.html#cb2094-7" aria-hidden="true" tabindex="-1"></a>species_n <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(dados<span class="sc">$</span>species))</span></code></pre></div>
<p>Porém, uma forma muito mais eficiente de realizarmos esse mesmo cálculo, é com o uso da função <code>across()</code>, que lhe permite aplicar uma mesma função sobre várias colunas de seu <code>data.frame</code>. Detalhe que a função <code>n_distinct()</code> pertence ao pacote <code>dplyr</code>, sendo apenas uma função equivalente e mais rápida do que a operação <code>length(unique(x))</code>. Em outras palavras, as operações <code>n_distinct(x)</code> e <code>length(unique(x))</code> trazem o mesmo resultado.</p>
<div class="sourceCode" id="cb2095"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2095-1"><a href="referências-2.html#cb2095-1" aria-hidden="true" tabindex="-1"></a>colunas <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;name&quot;</span>, <span class="st">&quot;hair_color&quot;</span>, <span class="st">&quot;skin_color&quot;</span>, <span class="st">&quot;eye_color&quot;</span>,</span>
<span id="cb2095-2"><a href="referências-2.html#cb2095-2" aria-hidden="true" tabindex="-1"></a>             <span class="st">&quot;sex&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;homeworld&quot;</span>, <span class="st">&quot;species&quot;</span>)</span>
<span id="cb2095-3"><a href="referências-2.html#cb2095-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2095-4"><a href="referências-2.html#cb2095-4" aria-hidden="true" tabindex="-1"></a>contagens <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span> </span>
<span id="cb2095-5"><a href="referências-2.html#cb2095-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb2095-6"><a href="referências-2.html#cb2095-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">all_of</span>(colunas), n_distinct)</span>
<span id="cb2095-7"><a href="referências-2.html#cb2095-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2095-8"><a href="referências-2.html#cb2095-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2095-9"><a href="referências-2.html#cb2095-9" aria-hidden="true" tabindex="-1"></a>contagens</span></code></pre></div>
<pre><code>## # A tibble: 1 x 8
##    name hair_color skin_color eye_color   sex gender homeworld species
##   &lt;int&gt;      &lt;int&gt;      &lt;int&gt;     &lt;int&gt; &lt;int&gt;  &lt;int&gt;     &lt;int&gt;   &lt;int&gt;
## 1    87         13         31        15     5      3        49      38</code></pre>
<p>Como resultado, temos um <code>data.frame</code> de uma única linha e várias colunas em <code>contagens</code>. Temos a capacidade de transformar esse <code>data.frame</code> em um vetor, através da função <code>unlist()</code>. Dessa maneira, para descobrirmos o maior número de valores únicos em cada coluna, podemos simplesmente aplicar a função <code>sort()</code> sobre o vetor resultante de <code>unlist()</code>. Repare abaixo, que as colunas <code>name</code> e <code>homeworld</code> são as colunas que contém mais valores únicos da coluna 1 até a coluna 11 da base, contendo 87 e 49 valores únicos respectivamente.</p>
<div class="sourceCode" id="cb2097"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2097-1"><a href="referências-2.html#cb2097-1" aria-hidden="true" tabindex="-1"></a>contagens <span class="sc">%&gt;%</span> </span>
<span id="cb2097-2"><a href="referências-2.html#cb2097-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb2097-3"><a href="referências-2.html#cb2097-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>(<span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##       name  homeworld    species skin_color  eye_color hair_color 
##         87         49         38         31         15         13 
##        sex     gender 
##          5          3</code></pre>
<center>
<em>Exercício 4</em>
</center>
<p><strong>4.4.A)</strong> Temos dois caminhos possíveis aqui, os quais se diferenciam apenas pelo posicionamento da função <code>filter()</code>. Em resumo, a questão pede por uma média que diz respeito apenas ao atendente Eduardo, logo, vamos precisar, em algum momento, de aplicar um <code>filter()</code> com o objetivo de pegar apenas as observações que dizem respeito ao Eduardo. Podemos: 1) filtrar a base inteira para pegar apenas as observações do Eduardo e, em seguida, calcular a média; ou, 2) agrupar a base por cada atendente, calcular a média de cada um e, em seguida, filtrar apenas a média de Eduardo. Ambas as opções chegam ao mesmo resultado de $3462 de receita média por parte de Eduardo.</p>
<div class="sourceCode" id="cb2099"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2099-1"><a href="referências-2.html#cb2099-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Opção 1:</span></span>
<span id="cb2099-2"><a href="referências-2.html#cb2099-2" aria-hidden="true" tabindex="-1"></a>transf <span class="sc">%&gt;%</span> </span>
<span id="cb2099-3"><a href="referências-2.html#cb2099-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Usuario <span class="sc">==</span> <span class="st">&quot;Eduardo&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2099-4"><a href="referências-2.html#cb2099-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">media =</span> <span class="fu">mean</span>(Valor))</span></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##   media
##   &lt;dbl&gt;
## 1 3462.</code></pre>
<div class="sourceCode" id="cb2101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2101-1"><a href="referências-2.html#cb2101-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Opção 2:</span></span>
<span id="cb2101-2"><a href="referências-2.html#cb2101-2" aria-hidden="true" tabindex="-1"></a>transf <span class="sc">%&gt;%</span> </span>
<span id="cb2101-3"><a href="referências-2.html#cb2101-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Usuario) <span class="sc">%&gt;%</span> </span>
<span id="cb2101-4"><a href="referências-2.html#cb2101-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">media =</span> <span class="fu">mean</span>(Valor)) <span class="sc">%&gt;%</span> </span>
<span id="cb2101-5"><a href="referências-2.html#cb2101-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Usuario <span class="sc">==</span> <span class="st">&quot;Eduardo&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 2
##   Usuario media
##   &lt;chr&gt;   &lt;dbl&gt;
## 1 Eduardo 3462.</code></pre>
<p><strong>4.4.B)</strong> Como podemos observar abaixo, Ana tem maior costume de enviar transferências para o Equador, com um total de 302 transferências destinadas para esse país ao longo da base. Tal cálculo consiste em: 1) filtrar da base todas as linhas que dizem respeito à Ana; 2) contar o número de linhas que dizem respeito a cada país; 3) ordenar a tabela resultante de acordo com a contagem de cada país em ordem crescente; 4) com o resultado ordenado em ordem crescente, os países mais populares ficam nas últimas linhas do resultado, logo, basta extraírmos a última do linha do resultado que teremos o país de destino mais popular de todos.</p>
<div class="sourceCode" id="cb2103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2103-1"><a href="referências-2.html#cb2103-1" aria-hidden="true" tabindex="-1"></a>transf <span class="sc">%&gt;%</span> </span>
<span id="cb2103-2"><a href="referências-2.html#cb2103-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Usuario <span class="sc">==</span> <span class="st">&quot;Ana&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2103-3"><a href="referências-2.html#cb2103-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(Pais) <span class="sc">%&gt;%</span> </span>
<span id="cb2103-4"><a href="referências-2.html#cb2103-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(n) <span class="sc">%&gt;%</span> </span>
<span id="cb2103-5"><a href="referências-2.html#cb2103-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tail</span>(<span class="at">n =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 2
##   Pais        n
##   &lt;chr&gt;   &lt;int&gt;
## 1 Equador   302</code></pre>
<p><strong>4.4.C)</strong> O pacote <code>dplyr</code> nos oferece a função <code>last()</code>, que é capaz de extrair o último valor de um vetor específico. Perceba que eu ainda forneço a coluna <code>Data</code> no argumento <code>order_by</code>. Dessa forma, <code>last()</code> vai pegar o último valor de um vetor com base na ordem dos valores da coluna <code>Data</code>. Porém, como a função <code>last()</code> é capaz de extrair o último valor de um vetor, eu preciso utilizar a função <code>across()</code> para aplicar <code>last()</code> sobre cada uma das colunas da tabela.</p>
<div class="sourceCode" id="cb2105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2105-1"><a href="referências-2.html#cb2105-1" aria-hidden="true" tabindex="-1"></a>transf <span class="sc">%&gt;%</span> </span>
<span id="cb2105-2"><a href="referências-2.html#cb2105-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Usuario) <span class="sc">%&gt;%</span> </span>
<span id="cb2105-3"><a href="referências-2.html#cb2105-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="at">.fns =</span> last, <span class="at">order_by =</span> Data))</span></code></pre></div>
<pre><code>## # A tibble: 8 x 6
##   Usuario     Data                 Valor TransferID Pais     Descricao
##   &lt;chr&gt;       &lt;dttm&gt;               &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;    &lt;lgl&gt;    
## 1 Ana         2018-12-23 22:06:50 16169.  115756250 Alemanha NA       
## 2 Armando     2018-12-23 18:54:36 17630.  114268959 Alemanha NA       
## 3 Eduardo     2018-12-23 23:49:44 16983.  115188827 Alemanha NA       
## 4 Júlio       2018-12-23 13:29:04 15614.  114836120 Alemanha NA       
## 5 Júlio Cesar 2018-12-23 20:17:38 16601.  115054244 Alemanha NA       
## 6 nathalia    2018-12-23 17:48:23 15256.  115476749 Alemanha NA       
## 7 Nathália    2018-12-23 21:12:50 17621.  114970801 Alemanha NA       
## 8 Sandra      2018-12-23 17:59:44 16081.  114979909 Alemanha NA</code></pre>
<p>Uma outra alternativa é utilizar a função <code>slice_max()</code>, que precisa apenas de uma coluna no argumento <code>order_by</code>, que corresponde à coluna de referência, ou, a coluna pela qual a função vai determinar o último valor de cada atendente.</p>
<div class="sourceCode" id="cb2107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2107-1"><a href="referências-2.html#cb2107-1" aria-hidden="true" tabindex="-1"></a>transf <span class="sc">%&gt;%</span> </span>
<span id="cb2107-2"><a href="referências-2.html#cb2107-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Usuario) <span class="sc">%&gt;%</span> </span>
<span id="cb2107-3"><a href="referências-2.html#cb2107-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> Data)</span></code></pre></div>
<pre><code>## # A tibble: 8 x 6
## # Groups:   Usuario [8]
##   Data                Usuario      Valor TransferID Pais     Descricao
##   &lt;dttm&gt;              &lt;chr&gt;        &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;    &lt;lgl&gt;    
## 1 2018-12-23 22:06:50 Ana         16169.  115756250 Alemanha NA       
## 2 2018-12-23 18:54:36 Armando     17630.  114268959 Alemanha NA       
## 3 2018-12-23 23:49:44 Eduardo     16983.  115188827 Alemanha NA       
## 4 2018-12-23 13:29:04 Júlio       15614.  114836120 Alemanha NA       
## 5 2018-12-23 20:17:38 Júlio Cesar 16601.  115054244 Alemanha NA       
## 6 2018-12-23 17:48:23 nathalia    15256.  115476749 Alemanha NA       
## 7 2018-12-23 21:12:50 Nathália    17621.  114970801 Alemanha NA       
## 8 2018-12-23 17:59:44 Sandra      16081.  114979909 Alemanha NA</code></pre>
</div>
</div>
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Introdução à Linguagem R: seus fundamentos e sua prática</strong>" was written by Pedro Faria. It was last built on 2022-04-03.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
<script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>

</html>
